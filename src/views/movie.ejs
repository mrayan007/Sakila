<html>
    <head>
        <title>Movie Details</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <link rel="stylesheet" href="/stylesheets/style.css">
        <link rel="icon" href="/images/cd3.gif">

        <style>
            #wishlist {
                background-color: #E09B20;
                font-family: 'helvetica';
                width: fit-content;
            }

            #wishlist button {
                background-color: #D8682F;
            }

            #wishlist p {
                color: black;
            }

            body {
                height: 100vh;
            }

            form {
                padding: 0;
                margin: 0;
            }
        </style>
    </head>
    <body style="background-color: #2B8072;">
        <div class="d-flex align-items-center">
            <h1 style="font-family: meyzie; color: #D8682F; font-size: 60px;"><%= movie[0].title %></h1>
            <img src="/images/cd3.gif" style="height: 65px; margin-top: -17px;">
            <div class="d-flex gap-3 text-black px-3 py-2 rounded-pill" id="movie-bar" style="background-color: #E19B21; font-family: helvetica;">
                <%= movie[0].category %>
                <div class="vr mt-1" style="background-color: black; opacity: 100%;"></div>
                <%= movie[0].rating %>
                <div class="vr mt-1" style="background-color: black; opacity: 100%;"></div>
                <%= movie[0].release_year %>
            </div>
        </div>
        
        <div class="ms-1 text-black">
            <p style="font-family: 'Helvetica Neue', sans-serif;" class="fs-5"><%= movie[0].description %></p>
            <span class="fs-4" style="font-family: 'helvetica';">Starring</span>
            <p style="font-family: 'Helvetica Neue', sans-serif;"><%= movie.map(actor => actor.first_name + ' ' + actor.last_name).join(', ') %>.</p>
            <span class="fs-4" style="font-family: 'helvetica';">Special Features</span>
            <div class="mt-3 mb-4">
                <% movie[0].special_features.split(',').forEach(feature => { %>
                    <span class="py-2 px-3 rounded-pill" style="background-color: #E9C177; font-family: 'Helvetica Neue', sans-serif;" id="feature"><%= feature.trim() %></span>
                <% }) %>
            </div>
            <span class="fs-4" style="font-family: 'helvetica';">Information</span>
            <p style="font-family: 'Helvetica Neue', sans-serif;">This movie is <strong><%= movie[0].length %></strong> minutes long, it is available to rent for <strong><%= movie[0].rental_duration %></strong> days at a rate of <strong>$<%= movie[0].rental_rate %></strong>.
            The replacement cost is <strong>$<%= movie[0].replacement_cost %></strong>.</p>
        </div>

        <% if (isAuthenticated) { %>
            <div id="Wishlist" class="py-3 px-3 mt-4 bordered mx-1 rounded-5">
                <% if (!inventory) { %>
                    <p>We have no DVD's in stock.</p>
                <% } else { %>
                    <p>We have <%= inventory.total %> DVD's in stock.</p>
                <% } %>
                <form action="/wishlist" method="POST">
                    <input type="hidden" name="movieId" value="<%= movie[0].film_id %>">
                    <button class="btn bordered rounded-pill text-black">Wishlist</button>
                </form>
            </div>
        <% } %>
    </body>
</html>